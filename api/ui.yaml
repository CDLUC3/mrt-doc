---
swagger: "2.0"
info:
  description: Merritt User Interface API
  version: 1.0.0
  title: Merritt User Interface API
host: merritt.cdlib.org
basePath: /terrywbrady/Merritt/1.0.0
tags:
- name: ui
  description: Merritt UI
- name: api
  description: Merritt API
- name: internal-use
  description: Internal use within the UI app
schemes:
- https
paths:
  /login:
    get:
      summary: Display login page
      tags:
      - ui
    post:
      summary: Send user login credentials
      tags:
      - ui
  /guest_login:
    get:
      summary: Redirect to guest login
      tags:
      - ui
    post:
      summary: Send guest login credentials
      tags:
      - ui
  /logout:
    get:
      summary: User logout
      tags:
      - ui
  /m/{ark}:
    get:
      summary: Display collection or object page
      tags:
      - ui
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
  /m/{ark}/{version}:
    get:
      summary: Display object version page
      tags:
      - ui
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
  /home/choose_collection:
    get:
      summary: Select collection for user session
      tags:
      - ui
  /user/update:
    get:
      summary: Update user profile
      tags:
      - ui
  /collection/search_results:
    get:
      summary: Display collection search results
      tags:
      - ui
  /version/index:
    get:
      summary: Access version page
      tags:
      - internal-use
  /a/{ark}:
    get:
      summary: Add object to collection
      tags:
      - ui
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
  /collection/object_count:
    get:
      summary: Get object count for collection
      tags:
      - ui
  /collection/version_count:
    get:
      summary: Get version count for collection
      tags:
      - ui
  /collection/file_count:
    get:
      summary: Get file count for collection
      tags:
      - ui
  /collection/total_size:
    get:
      summary: Get total byte size for collection (all versions)
      tags:
      - ui
  /collection/billable_size:
    get:
      summary: Get total billable byte size for collection
      tags:
      - ui
  /d/{ark}/{version}/{file}:
    get:
      summary: Download file (stream bytes)
      deprecated: true
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
      - in: path
        name: file
        type: string
        required: true
  /d/{ark}/{version}:
    get:
      summary: Download assembled object version (stream bytes)
      deprecated: true
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
  /d/{ark}:
    get:
      summary: Download assembled object (stream bytes)
      deprecated: true
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
  /u/{ark}/{version}:
    get:
      summary: Download assembled object version (stream bytes) including only producer files
      deprecated: true
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
  /u/{ark}:
    get:
      summary: Download assembled object (stream bytes) including only producer files
      deprecated: true
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
  /dm/{ark}:
    get:
      summary: Download object manifest (stream bytes)
      deprecated: true
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
  /feeds/recent:
    get:
      summary: ???
      deprecated: true
      tags:
      - ui
  /object/recent.{feedtype}:
    get:
      summary: Generate atom feed - what other formats do we support?
      tags:
      - ui
      parameters: 
      - in: path
        name: feedtype
        type: string
        required: true
  /api/presign-file/{ark}/{version}/{file}:
    get:
      summary: Retrieve file by presigned url
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
      - in: path
        name: file
        type: string
        required: true
  /api/get-storage-key-file/{ark}/{version}/{file}:
    get:
      summary: Create key to send to storage service
      tags:
      - internal-use
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
      - in: path
        name: file
        type: string
        required: true
  /api/assemble-version/{ark}/{version}:
    get:
      summary: Start async assembly of object version
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
      - in: path
        name: version
        type: integer
        required: true
  /api/assemble-obj/{ark}:
    get:
      summary: Start async assembly of object 
      tags:
      - api
      parameters: 
      - in: path
        name: ark
        type: string
        required: true
  /api/presign-obj-by-token/{token}:
    get:
      summary: Retrive assembled object/version by presigned url
      tags:
      - api
      parameters: 
      - in: path
        name: token
        type: string
        required: true
  /object/ingest:
    post:
      summary: Start object ingest (tbd differentiate ingest vs upload)
      tags:
      - ui
      - api
  /object/update:
    post:
      summary: Start new version ingest for an object
      tags:
      - ui
      - api
  /object/mint:
    post:
      summary: Mint an id for a new object
      tags:
      - ui
      - internal-use
  /object/upload:
    post:
      summary: Start object ingest (tbd differentiate ingest vs upload)
      tags:
      - ui
      - api
