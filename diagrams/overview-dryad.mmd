%%{init: {'theme': 'neutral', 'securityLevel': 'loose', 'themeVariables': {'fontFamily': 'arial'}}}%%
graph TD
  UI(Merritt UI)
  click UI href "https://github.com/CDLUC3/mrt-dashboard" "source code"
  DRYAD(Dryad UI)
  click DRYAD href "https://datadryad.org/" "service link"
  RDS[(Inventory DB)]
  CLOUD(("Cloud Storage"))
  click CLOUD href "https://github.com/CDLUC3/mrt-cloud" "source code"
  LDAP[/LDAP\]
  SWORD(Sword)
  click SWORD href "https://github.com/CDLUC3/mrt-sword" "source code"
  BROWSER[[Browser]]
  ING(Ingest)
  click ING href "https://github.com/CDLUC3/mrt-ingest" "source code"
  OAI(OAI-PMH)
  click OAI href "https://github.com/CDLUC3/mrt-oai" "source code"

  subgraph flowchart
    BROWSER --> |retrieval req| DRYAD
    DRYAD --> |retrieval req| UI
    UI -.-> |presigned URL| DRYAD
    DRYAD --> |manifest| SWORD
    SWORD --> |deposit| ING
    SWORD --> |authorization| LDAP
    RDS --> OAI
    OAI --> DRYAD
    CLOUD -.-> |presigned retrieval| BROWSER
    SWORD -.-> |collection lookup| RDS
  end
  style CLOUD fill:#77913C
  style RDS fill:#F68D2F
  style LDAP fill:cyan
  style DRYAD fill:cyan

